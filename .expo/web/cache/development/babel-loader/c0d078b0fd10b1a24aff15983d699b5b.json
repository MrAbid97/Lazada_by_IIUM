{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { CREATE_PRODUCT, DELETE_PRODUCT, SET_PRODUCTS, UPDATE_PRODUCT } from \"../actions/products\";\nimport Product from \"../../models/product\";\nvar initialState = {\n  availableProducts: [],\n  userProducts: []\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_PRODUCTS:\n      return {\n        availableProducts: action.products,\n        userProducts: action.userProducts\n      };\n\n    case CREATE_PRODUCT:\n      var newProduct = new Product(action.productData.id, action.productData.ownerId, action.productData.title, action.productData.imageUrl, action.productData.description, action.productData.price);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        availableProducts: state.availableProducts.concat(newProduct),\n        userProducts: state.userProducts.concat(newProduct)\n      });\n\n    case UPDATE_PRODUCT:\n      var productIndex = state.userProducts.findIndex(function (prod) {\n        return prod.id === action.pid;\n      });\n      var updatedProduct = new Product(action.pid, state.userProducts[productIndex].ownerId, action.productData.title, action.productData.imageUrl, action.productData.description, state.userProducts[productIndex].price);\n\n      var updatedUserProducts = _toConsumableArray(state.userProducts);\n\n      updatedUserProducts[productIndex] = updatedProduct;\n      var availableProductIndex = state.availableProducts.findIndex(function (prod) {\n        return prod.id === action.pid;\n      });\n\n      var updatedAvailableProducts = _toConsumableArray(state.availableProducts);\n\n      updatedAvailableProducts[availableProductIndex] = updatedProduct;\n      return _objectSpread(_objectSpread({}, state), {}, {\n        availableProducts: updatedAvailableProducts,\n        userProducts: updatedUserProducts\n      });\n\n    case DELETE_PRODUCT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        userProducts: state.userProducts.filter(function (product) {\n          return product.id !== action.pid;\n        }),\n        availableProducts: state.availableProducts.filter(function (product) {\n          return product.id !== action.pid;\n        })\n      });\n  }\n\n  return state;\n});","map":{"version":3,"sources":["/home/ash/Desktop/bro_app/store/reducers/products.js"],"names":["CREATE_PRODUCT","DELETE_PRODUCT","SET_PRODUCTS","UPDATE_PRODUCT","Product","initialState","availableProducts","userProducts","state","action","type","products","newProduct","productData","id","ownerId","title","imageUrl","description","price","concat","productIndex","findIndex","prod","pid","updatedProduct","updatedUserProducts","availableProductIndex","updatedAvailableProducts","filter","product"],"mappings":";;;;;;;AAAA,SAAQA,cAAR,EAAwBC,cAAxB,EAAwCC,YAAxC,EAAsDC,cAAtD;AACA,OAAOC,OAAP;AAGA,IAAMC,YAAY,GAAG;AACjBC,EAAAA,iBAAiB,EAAE,EADF;AAEjBC,EAAAA,YAAY,EAAE;AAFG,CAArB;AAKA,gBAAe,YAAkC;AAAA,MAAjCC,KAAiC,uEAAzBH,YAAyB;AAAA,MAAXI,MAAW;;AAC7C,UAAQA,MAAM,CAACC,IAAf;AAEI,SAAKR,YAAL;AACI,aAAO;AACHI,QAAAA,iBAAiB,EAAEG,MAAM,CAACE,QADvB;AAEHJ,QAAAA,YAAY,EAAEE,MAAM,CAACF;AAFlB,OAAP;;AAMJ,SAAKP,cAAL;AACI,UAAMY,UAAU,GAAG,IAAIR,OAAJ,CACfK,MAAM,CAACI,WAAP,CAAmBC,EADJ,EAEfL,MAAM,CAACI,WAAP,CAAmBE,OAFJ,EAGfN,MAAM,CAACI,WAAP,CAAmBG,KAHJ,EAIfP,MAAM,CAACI,WAAP,CAAmBI,QAJJ,EAKfR,MAAM,CAACI,WAAP,CAAmBK,WALJ,EAMfT,MAAM,CAACI,WAAP,CAAmBM,KANJ,CAAnB;AASA,6CACOX,KADP;AAEIF,QAAAA,iBAAiB,EAAEE,KAAK,CAACF,iBAAN,CAAwBc,MAAxB,CAA+BR,UAA/B,CAFvB;AAGIL,QAAAA,YAAY,EAAEC,KAAK,CAACD,YAAN,CAAmBa,MAAnB,CAA0BR,UAA1B;AAHlB;;AAOJ,SAAKT,cAAL;AACI,UAAMkB,YAAY,GAAGb,KAAK,CAACD,YAAN,CAAmBe,SAAnB,CAA6B,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACT,EAAL,KAAYL,MAAM,CAACe,GAAvB;AAAA,OAAjC,CAArB;AACA,UAAMC,cAAc,GAAG,IAAIrB,OAAJ,CACnBK,MAAM,CAACe,GADY,EAEnBhB,KAAK,CAACD,YAAN,CAAmBc,YAAnB,EAAiCN,OAFd,EAGnBN,MAAM,CAACI,WAAP,CAAmBG,KAHA,EAInBP,MAAM,CAACI,WAAP,CAAmBI,QAJA,EAKnBR,MAAM,CAACI,WAAP,CAAmBK,WALA,EAMnBV,KAAK,CAACD,YAAN,CAAmBc,YAAnB,EAAiCF,KANd,CAAvB;;AASA,UAAMO,mBAAmB,sBAAOlB,KAAK,CAACD,YAAb,CAAzB;;AACAmB,MAAAA,mBAAmB,CAACL,YAAD,CAAnB,GAAoCI,cAApC;AAEA,UAAME,qBAAqB,GAAGnB,KAAK,CAACF,iBAAN,CAAwBgB,SAAxB,CAAkC,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACT,EAAL,KAAYL,MAAM,CAACe,GAAvB;AAAA,OAAtC,CAA9B;;AACA,UAAMI,wBAAwB,sBAAOpB,KAAK,CAACF,iBAAb,CAA9B;;AACAsB,MAAAA,wBAAwB,CAACD,qBAAD,CAAxB,GAAkDF,cAAlD;AAEA,6CACOjB,KADP;AAEIF,QAAAA,iBAAiB,EAAEsB,wBAFvB;AAGIrB,QAAAA,YAAY,EAAEmB;AAHlB;;AAMJ,SAAKzB,cAAL;AACI,6CACOO,KADP;AAEID,QAAAA,YAAY,EAAEC,KAAK,CAACD,YAAN,CAAmBsB,MAAnB,CAA0B,UAAAC,OAAO;AAAA,iBAAIA,OAAO,CAAChB,EAAR,KAAeL,MAAM,CAACe,GAA1B;AAAA,SAAjC,CAFlB;AAGIlB,QAAAA,iBAAiB,EAAEE,KAAK,CAACF,iBAAN,CAAwBuB,MAAxB,CAA+B,UAAAC,OAAO;AAAA,iBAAIA,OAAO,CAAChB,EAAR,KAAeL,MAAM,CAACe,GAA1B;AAAA,SAAtC;AAHvB;AAnDR;;AA2DA,SAAOhB,KAAP;AACH,CA7DD","sourcesContent":["import {CREATE_PRODUCT, DELETE_PRODUCT, SET_PRODUCTS, UPDATE_PRODUCT} from \"../actions/products\";\r\nimport Product from \"../../models/product\";\r\n\r\n\r\nconst initialState = {\r\n    availableProducts: [],\r\n    userProducts: []\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case SET_PRODUCTS:\r\n            return {\r\n                availableProducts: action.products,\r\n                userProducts: action.userProducts\r\n            };\r\n\r\n\r\n        case CREATE_PRODUCT:\r\n            const newProduct = new Product(\r\n                action.productData.id,\r\n                action.productData.ownerId,\r\n                action.productData.title,\r\n                action.productData.imageUrl,\r\n                action.productData.description,\r\n                action.productData.price\r\n            );\r\n\r\n            return {\r\n                ...state,\r\n                availableProducts: state.availableProducts.concat(newProduct),\r\n                userProducts: state.userProducts.concat(newProduct),\r\n            }\r\n\r\n\r\n        case UPDATE_PRODUCT:\r\n            const productIndex = state.userProducts.findIndex(prod => prod.id === action.pid);\r\n            const updatedProduct = new Product(\r\n                action.pid,\r\n                state.userProducts[productIndex].ownerId,\r\n                action.productData.title,\r\n                action.productData.imageUrl,\r\n                action.productData.description,\r\n                state.userProducts[productIndex].price\r\n            );\r\n\r\n            const updatedUserProducts = [...state.userProducts];\r\n            updatedUserProducts[productIndex] = updatedProduct;\r\n\r\n            const availableProductIndex = state.availableProducts.findIndex(prod => prod.id === action.pid);\r\n            const updatedAvailableProducts = [...state.availableProducts];\r\n            updatedAvailableProducts[availableProductIndex] = updatedProduct;\r\n\r\n            return {\r\n                ...state,\r\n                availableProducts: updatedAvailableProducts,\r\n                userProducts: updatedUserProducts\r\n            }\r\n\r\n        case DELETE_PRODUCT:\r\n            return {\r\n                ...state,\r\n                userProducts: state.userProducts.filter(product => product.id !== action.pid),\r\n                availableProducts: state.availableProducts.filter(product => product.id !== action.pid)\r\n            }\r\n\r\n\r\n    }\r\n    return state;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}